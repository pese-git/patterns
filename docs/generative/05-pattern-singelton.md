
## Одиночка

> **Также известен как:** Singleton

### Суть паттерна


**Одиночка** — это порождающий паттерн проектирования, который гарантирует, что у класса есть только один экземпляр, и предоставляет к нему глобальную точку доступа.

Все реализации одиночки сводятся к тому, чтобы скрыть конструктор по умолчанию и создать публичный статический метод, который и будет контролировать жизненный цикл объекта-одиночки.

Преимущества:

- Гарантирует наличие единственного экземпляра класса.
- Предоставляет к нему глобальную точку доступа.
- Реализует отложенную инициализацию объекта-одиночки.

Недостатки:

- Нарушает принцип единственной ответственности класса.
- Маскирует плохой дизайн.
- Проблемы мультипоточности.
- Требует постоянного создания Mock-объектов при юнит-тестировании.


Пример:

```dart
class Database {
  static Database _instance;

  Database._() {}

  static Database getInstance() {
    if (_instance == null) {
      _instance = Database._();
    }
    return _instance;
  }

  void query(String query) {
    print("EXECUTE query: " + query);
  }
}

main(List<String> args) {
  final instance = Database.getInstance();
  instance.query("SELECT * WEHERE userId=1 FROM users");
}
```